{# templates/users-message/_textarea.html.twig #}
{% set fieldId = formField.vars.id %}
{% set label = formField.vars.label|default(formField.vars.name|title) %}

<div class="relative z-0 group">
	<div data-controller="richtext" data-richtext-editor-target="editor" class="w-full border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600">
		
		<div class="px-4 py-2 bg-white rounded-b-lg dark:bg-gray-800">
			<label for="{{ fieldId }}" class="sr-only">
				{{ label }}
			</label>
			{# This div is where Tiptap will render the rich text editor content #}
			<div data-richtext-target="editor" class="block w-full px-0 text-sm text-gray-800 bg-white border-0 dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400" contenteditable="true"></div>
			{# The actual Symfony form textarea, kept hidden, Tiptap will write its HTML here #}
			{{ form_widget(formField, {
                'attr': {
                'class': 'hidden', 
                'data-richtext-target': 'input',
				'readonly': 'readonly'
                }
            }) }}
		</div>
	</div>
	{# Display form errors outside the richtext div, but still associated with the field #}
	{{ form_errors(formField) }}
</div>
